<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOUSEDZ AI IPTV CHAT</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0a0e12;
    color:#fff;
}

/* Ø²Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
.chat-toggle{
    position:fixed;
    bottom:20px;
    right:20px;
    width:55px;
    height:55px;
    border-radius:50%;
    background:#00d2ff;
    border:none;
    font-size:22px;
    cursor:pointer;
    z-index:1000;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
.chat-box{
    position:fixed;
    bottom:90px;
    right:20px;
    width:300px;
    height:420px;
    background:#121a28;
    border-radius:15px;
    display:none;
    flex-direction:column;
    border:1px solid #00d2ff;
}

.chat-header{
    padding:10px;
    background:#1e293b;
    font-weight:bold;
    display:flex;
    justify-content:space-between;
}

.chat-messages{
    flex:1;
    padding:10px;
    overflow-y:auto;
    font-size:14px;
}

.chat-message span{
    color:#22c55e;
    font-weight:bold;
}

.chat-input{
    padding:8px;
    display:flex;
    flex-direction:column;
    gap:5px;
}

.chat-input input{
    padding:8px;
    border-radius:8px;
    border:none;
    outline:none;
}

.chat-input button{
    padding:8px;
    border:none;
    border-radius:8px;
    background:#00d2ff;
    cursor:pointer;
}
</style>
</head>

<body>

<h2 style="text-align:center;margin-top:20px;">
ğŸ­ MOUSEDZ AI IPTV CHAT
</h2>

<video id="video" controls style="width:100%;max-height:70vh;"></video>

<!-- Ø²Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
<button class="chat-toggle" onclick="toggleChat()">ğŸ’¬</button>

<!-- Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
<div class="chat-box" id="chatBox">
    <div class="chat-header">
        ğŸ’¬ Ø¯Ø±Ø¯Ø´Ø©
        <span onclick="toggleChat()">âœ–</span>
    </div>

    <div class="chat-messages" id="chatMessages"></div>

    <div class="chat-input">
        <input id="nickname" placeholder="Ø§Ø³Ù… Ù…Ø³ØªØ¹Ø§Ø±">
        <input id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© ğŸ˜Š"
               onkeydown="if(event.key==='Enter')sendMessage()">
        <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
</div>

<script>
// ğŸ”´ Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  databaseURL: "https://PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "PROJECT_ID",
  storageBucket: "PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const chatRef = db.ref("chat");

// ÙØªØ­ / ØºÙ„Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
function toggleChat(){
    const box = document.getElementById("chatBox");
    box.style.display = box.style.display === "flex" ? "none" : "flex";
}

// Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
function sendMessage(){
    const nick = nickname.value.trim();
    const msg  = messageInput.value.trim();
    if(!nick || !msg) return;

    chatRef.push({
        name:nick,
        message:msg,
        time:Date.now()
    });

    messageInput.value="";
}

// Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
chatRef.limitToLast(100).on("child_added", snap=>{
    const data = snap.val();
    const div = document.createElement("div");
    div.className="chat-message";
    div.innerHTML = `<span>${data.name}:</span> ${data.message}`;
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
});
</script>

</body>
</html>
